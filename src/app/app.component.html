<app-loading *ngIf="loading"></app-loading>
<app-nav *ngIf="!playState.isPlaying"></app-nav>

<!-- Close button for play mode -->
<button
  *ngIf="playState.isPlaying"
  (click)="stopPlaying()"
  class="fixed top-4 right-4 z-50 bg-black/80 hover:bg-black/90 text-white p-3 rounded-full border-2 border-white/20 transition-all duration-200 hover:scale-110"
  aria-label="Exit play mode"
>
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
</button>

<!-- Single page layout now delegates each section to its own standalone component -->
<section id="home" class="min-h-screen">
  <app-hero [showOnlyBackground]="playState.isPlaying"></app-hero>
  <!-- Keep play button in DOM so help menu can persist after activation -->
  <app-play-button></app-play-button>
  <app-home *ngIf="!playState.isPlaying"></app-home>
</section>

<!-- Resume CTA bridging section -->
<section id="resume" *ngIf="!playState.isPlaying" class="bg-transparent">
  <div class="grid grid-cols-1 md:grid-cols-[20%_1fr] items-stretch h-48 md:h-56">
    <!-- Left rail for continuity -->
    <app-rail></app-rail>
    <!-- Button content -->
    <div class="flex h-full items-center justify-center md:-ml-[20%] pl-4">
      <div class="w-[92%] sm:w-[80%] md:w-[70%] lg:w-[60%] mx-auto flex justify-center">
        <a
          href="/Arsen_Djurdjev_Resume.pdf"
          download
          target="_blank"
          rel="noopener"
          class="play-button group relative isolate font-semibold tracking-[0.025em] text-lg px-6 py-3 rounded-full border border-[rgba(var(--color-accent-rgb)/0.55)] bg-gradient-to-br from-[var(--color-accent)] to-[var(--color-accent-alt)] text-[var(--color-text)] shadow-md shadow-[rgba(0,0,0,0.18)] transition-all duration-300 hover:-translate-y-0.5 active:translate-y-0 hover:shadow-lg focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--color-accent)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--color-bg)]"
          aria-label="Download resume PDF"
        >
          â¬‡ <span class="ml-1">Resume</span>
        </a>
      </div>
    </div>
  </div>
</section>

<section id="experience" class="min-h-screen" *ngIf="!playState.isPlaying">
  <app-experience></app-experience>
</section>

<section id="projects" class="min-h-screen" *ngIf="!playState.isPlaying">
  <app-projects></app-projects>
</section>

<section id="about" class="min-h-screen" *ngIf="!playState.isPlaying">
  <app-about></app-about>
</section>

<section id="contact" class="min-h-screen" *ngIf="!playState.isPlaying">
  <app-contact></app-contact>
</section>
