<app-loading *ngIf="loading"></app-loading>
<app-nav *ngIf="!playState.isPlaying"></app-nav>

<!-- Close button for play mode -->
<button
  *ngIf="playState.isPlaying"
  (click)="stopPlaying()"
  class="fixed top-4 right-4 z-50 bg-black/80 hover:bg-black/90 text-white p-3 rounded-full border-2 border-white/20 transition-all duration-200 hover:scale-110"
  aria-label="Exit play mode"
>
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
</button>

<!-- Hero / start section (full viewport) -->
<section id="start" class="relative">
  <app-hero [showOnlyBackground]="playState.isPlaying" (openResumeModal)="openResumeModal()"></app-hero>
</section>

<!-- Home content now its own section below the fold -->
<section id="home" class="min-h-screen" *ngIf="!playState.isPlaying">
  <app-home></app-home>
</section>

<!-- Resume CTA bridging section -->
<section id="resume" *ngIf="!playState.isPlaying" class="bg-transparent">
  <div class="grid grid-cols-1 md:grid-cols-[20%_1fr] items-stretch h-48 md:h-56">
    <!-- Left rail for continuity -->
    <app-rail></app-rail>
    <!-- Button content -->
    <div class="flex h-full items-center justify-center md:-ml-[20%] pl-4">
      <div class="w-[92%] sm:w-[80%] md:w-[70%] lg:w-[60%] mx-auto flex justify-center">
  <!-- Play button moved here (swapped with CV button). Note: now hidden during play mode with the section. -->
  <app-play-button></app-play-button>
      </div>
    </div>
  </div>
</section>

<!-- Resume Modal Instance -->
<app-resume-modal [visible]="resumeVisible" (close)="closeResumeModal()"></app-resume-modal>

<section id="experience" class="min-h-screen" *ngIf="!playState.isPlaying">
  <app-experience></app-experience>
</section>

<section id="projects" class="min-h-screen" *ngIf="!playState.isPlaying">
  <app-projects></app-projects>
</section>

<section id="about" class="min-h-screen" *ngIf="!playState.isPlaying">
  <app-about></app-about>
</section>

<section id="contact" class="min-h-screen" *ngIf="!playState.isPlaying">
  <app-contact></app-contact>
</section>
