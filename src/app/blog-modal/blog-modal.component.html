<!-- Blog Modal Overlay -->
<div class="modal-overlay" *ngIf="visible" @modalAnimation (click)="onOverlayClick($event)">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <!-- Close button -->
    <button class="close-button" (click)="close()" aria-label="Close modal">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>

    <!-- Post title -->
    <h2 class="modal-title">{{ post?.title }}</h2>

    <!-- Image display -->
    <div class="image-container" *ngIf="post?.images && post!.images!.length > 0">
      <!-- Main image -->
      <div class="main-image">
        <img [src]="post!.images![currentImageIndex]" [alt]="post!.title + ' - Image ' + (currentImageIndex + 1)" />
      </div>

      <!-- Navigation arrows (only show if more than 1 image) -->
      <button
        class="nav-button prev-button"
        (click)="prevImage()"
        [disabled]="currentImageIndex === 0"
        *ngIf="post!.images!.length > 1"
        aria-label="Previous image">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="15,18 9,12 15,6"></polyline>
        </svg>
      </button>

      <button
        class="nav-button next-button"
        (click)="nextImage()"
        [disabled]="currentImageIndex === post!.images!.length - 1"
        *ngIf="post!.images!.length > 1"
        aria-label="Next image">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="9,18 15,12 9,6"></polyline>
        </svg>
      </button>

      <!-- Image indicators -->
      <div class="image-indicators" *ngIf="post!.images!.length > 1">
        <button
          *ngFor="let image of post!.images!; let i = index"
          class="indicator"
          [class.active]="i === currentImageIndex"
          (click)="goToImage(i)"
          [attr.aria-label]="'Go to image ' + (i + 1)">
        </button>
      </div>
    </div>

    <!-- Post description -->
    <div class="post-description" *ngIf="post?.description">
      <p>{{ post!.description }}</p>
    </div>

    <!-- Post tags -->
    <div class="post-tags" *ngIf="post?.tags && post!.tags!.length > 0">
      <span *ngFor="let tag of post!.tags!" class="tag">{{ tag }}</span>
    </div>

    <!-- Post date -->
    <div class="post-date" *ngIf="post?.created_at">
      <p>{{ post!.created_at | date:'mediumDate' }}</p>
    </div>
  </div>
</div>
